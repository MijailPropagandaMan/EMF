# -*- ck2 -*-
# Generated from ZCK source code; compiler version: v0.1.1

emf_willfully_abdicate = {
	custom_tooltip = {
		text = THIS_ABDICATES_TT
		save_event_target_as = emf_abdicator_tmp
		character_event = {
			id = emf_core.110
		}
		if = {
			limit = {
				event_target:emf_abdicate_real_heir = { always = yes }
			}
			event_target:emf_abdicate_real_heir = {
				save_event_target_as = emf_heir_tmp
			}
		}
		else = {
			current_heir = {
				save_event_target_as = emf_heir_tmp
			}
		}
	}
	if = {
		limit = {
			event_target:emf_abdicate_real_heir = { always = yes }
		}
		abdicate_to = event_target:emf_heir_tmp
		hidden_effect = {
			if = {
				limit = {
					has_flag = emf_abdicate_no_move
					liege = {
						NOT = { character = event_target:emf_heir_tmp }
					}
				}
				move_character = event_target:emf_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_flag = emf_abdicate_no_move
		}
		abdicate = {
			move = no
		}
	}
	else = {
		abdicate = yes
	}
	emf_liege_change = yes
	event_target:emf_heir_tmp = {
		emf_liege_change = yes
	}
	clr_flag = emf_abdicate_no_move
	clear_event_target = emf_heir_tmp
	clear_event_target = emf_abdicator_tmp
	clear_event_target = emf_abdicate_real_heir
}
emf_abdicate = {
	custom_tooltip = {
		text = THIS_IS_FORCED_TO_ABDICATE_TT
		if = {
			limit = {
				NOT = { current_heir = { always = yes } }
			}
			log = "DEBUG: emf_abdicate: [This.GetTitledFirstName] of the [This.PrimaryTitle.GetFullBaseName] (#[This.GetID]/[This.PrimaryTitle.GetID]) has no expected successor."
		}
		else = {
			emf_willfully_abdicate = yes
		}
	}
}
emf_transfer_crown_on_abdication = {
	if = {
		limit = {
			NOT = { event_target:emf_heir_tmp = { always = yes } }
		}
		current_heir = {
			save_event_target_as = emf_heir_tmp
		}
	}
	if = {
		limit = {
			has_landed_title = e_hre
		}
		clear_event_target = emf_crown_heir_tmp
		e_hre = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_hre
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = e_hre_french
		}
		clear_event_target = emf_crown_heir_tmp
		e_hre_french = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_hre
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = e_byzantium
		}
		clear_event_target = emf_crown_heir_tmp
		e_byzantium = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_byzantine
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = e_roman_empire
		}
		clear_event_target = emf_crown_heir_tmp
		e_roman_empire = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_byzantine
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = e_persia
		}
		clear_event_target = emf_crown_heir_tmp
		e_persia = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_pahlavi
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	if = {
		limit = {
			has_landed_title = d_norse_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_norse_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_tengri_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_tengri_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_tengri_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_slavic_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_slavic_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_slavic_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_baltic_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_baltic_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_romuva_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_finnish_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_finnish_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_finnish_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_west_african_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_west_african_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_west_african_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_zun_pagan_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_zun_pagan_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_zun_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_bon_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_bon_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = scepter_bon_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = d_aztec_reformed
		}
		clear_event_target = emf_crown_heir_tmp
		d_aztec_reformed = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = crown_aztec_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	else_if = {
		limit = {
			has_landed_title = k_hellenic_pagan
		}
		clear_event_target = emf_crown_heir_tmp
		k_hellenic_pagan = {
			current_heir = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		if = {
			limit = {
				NOT = { event_target:emf_crown_heir_tmp = { always = yes } }
			}
			event_target:emf_heir_tmp = {
				save_event_target_as = emf_crown_heir_tmp
			}
		}
		any_artifact = {
			limit = {
				artifact_type = scepter_hellenic_fylkir
			}
			transfer_artifact = {
				from = PREV
				to = event_target:emf_crown_heir_tmp
			}
		}
	}
	if = {
		limit = {
			player_heir = {
				is_alive = yes
			}
		}
		player_heir = {
			save_event_target_as = emf_player_heir_tmp
		}
	}
	else = {
		capital_scope = {
			county = {
				current_heir = {
					save_event_target_as = emf_player_heir_tmp
				}
			}
		}
	}
	any_artifact = {
		limit = {
			NOR = {
				artifact_type = crown_hre
				artifact_type = crown_byzantine
				artifact_type = crown_pahlavi
				artifact_type = crown_fylkir
				artifact_type = crown_tengri_fylkir
				artifact_type = crown_slavic_fylkir
				artifact_type = crown_romuva_fylkir
				artifact_type = crown_finnish_fylkir
				artifact_type = crown_west_african_fylkir
				artifact_type = crown_zun_fylkir
				artifact_type = scepter_bon_fylkir
				artifact_type = crown_aztec_fylkir
				artifact_type = scepter_hellenic_fylkir
			}
		}
		transfer_artifact = {
			from = PREV
			to = event_target:emf_player_heir_tmp
		}
	}
	clear_event_target = emf_crown_heir_tmp
	clear_event_target = emf_player_heir_tmp
}
